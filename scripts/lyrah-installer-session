#!/bin/bash
# Lyrah OS Installer Session
# Runs Calamares as the sole application on a minimal kwin_wayland compositor.
# No desktop, no taskbar â€” just the installer, like a Windows setup.

export XDG_SESSION_TYPE=wayland
export QT_QPA_PLATFORM=wayland
export QT_WAYLAND_DISABLE_WINDOWDECORATION=1

# Use sudo -n (non-interactive) so the prompt never blocks inside a
# headless Wayland session.  The liveuser has NOPASSWD sudo configured
# in /etc/sudoers.d/liveuser.  Pass -E to preserve the Wayland
# environment variables that Calamares and Qt need.
exec dbus-run-session kwin_wayland --no-lockscreen -- sudo -n -E calamares
